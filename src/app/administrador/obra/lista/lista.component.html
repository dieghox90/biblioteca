<h1 class="titulos">Obras Registradas</h1>



<p-table #dt1 responsiveLayout="stack" [value]="obras" [paginator]="true" styleClass="p-datatable-gridlines" [rows]="10"
    [showCurrentPageReport]="true" [rowsPerPageOptions]="[10,25,50]" >



    <ng-template pTemplate="header" let-columns>
        <tr>
            <th>
                Portada
            </th>

            <th>
                Documento
            </th>

            <th style="width:250px">
                Titulo
                <br>
                <p-columnFilter type="text" field="titulo"></p-columnFilter>

            </th>

            <th>
                Fecha de Publicación
            </th>

            <th>
                Autores
            </th>

            <th>
                Acciones
            </th>
        </tr>
    </ng-template>
    <ng-template pTemplate="body" let-obra let-columns="columns">
        <tr>
            <td><span class="p-column-title">Portada</span>
                <img *ngIf="obra.nombreArchivoImagen!=null" style="width:120px"
                    [src]="urlBaseImg+obra.nombreArchivoImagen" alt="">
                <img *ngIf="obra.nombreArchivoImagen ==null" style="width:120px" src="https://www.itspm.edu.ec/recursos/pdf.png" alt="">
            </td>
            <td><span class="p-column-title">Documento</span>

                <div class="w-100 text-center">
                    <a href="{{urlBaseImg + obra.nombreArchivoDocumento}}" class="w-100">
                        <img *ngIf="obra.nombreArchivoDocumento !=null" style="width:40px"
                            src="https://www.itspm.edu.ec/recursos/pdf.png" alt="">
                            <br>
                        <span class="fas fa-download text-center">
                        </span>
                    </a>
                </div>
            </td>
            <td style="width:250px" ><span class="p-column-title">Título</span>
                {{obra.titulo}}
            </td>
            <td><span class="p-column-title">Fecha de Publicación</span>
                {{obra.fecha_publicacion}}
            </td>


            <td>
                <span class="p-column-title">Autores</span>
                    <ol>
                        <li *ngFor="let autor of obra.autores">{{autor.nombres}} {{autor.apellidos}}</li>
                    </ol>
            </td>

            <td>
                <span class="p-column-title">Acciones</span>
                <button [routerLink]="['/admin/editar-obra', obra.id]" class="btn btn-primary btn-sm">
                    <span class="fas fa-edit"></span> Editar
                </button>
            </td>

        </tr>
    </ng-template>
</p-table>



<div class="modal fade" id="staticBackdrop" data-backdrop="static" data-keyboard="false" tabindex="-1"
    aria-labelledby="staticBackdropLabel" aria-hidden="true">
    <div class="modal-dialog modal-xl">
        <div class="modal-content">
            <div class="modal-header text-center">
                <h5 class="modal-title w-100 text-center" id="staticBackdropLabel">PDF</h5>
                <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                </button>
            </div>
            <div class="modal-body">


                <pdf-viewer [rotation]="0" [fit-to-page]="true" [original-size]="true" [show-all]="true" [src]="urlPdf"
                    style="min-height: 900px;"></pdf-viewer>


            </div>
        </div>
    </div>
</div>